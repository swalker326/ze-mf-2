"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.validateParams = void 0;
const object_has_keys_1 = require("./object-has-keys");
function validateParams({ federationRemoteEntry, topLevelPackage, modules }, standalone) {
    const hasLoc = federationRemoteEntry
        ? (0, object_has_keys_1.objHasKeys)(federationRemoteEntry, ['origins', '0', 'loc'])
        : federationRemoteEntry;
    const hasDependencies = (0, object_has_keys_1.objHasKeys)(topLevelPackage, ['dependencies']);
    const hasDevDependencies = (0, object_has_keys_1.objHasKeys)(topLevelPackage, ['devDependencies']);
    const hasOptionalDependencies = (0, object_has_keys_1.objHasKeys)(topLevelPackage, ['optionalDependencies']);
    if (federationRemoteEntry) {
        if (typeof hasLoc === 'undefined' ||
            (federationRemoteEntry.origins && federationRemoteEntry.origins[0].loc === '')) {
            throw new Error('federationRemoteEntry.origins[0].loc must be defined and have a value');
        }
    }
    if ((modules && !modules.length) || typeof modules === 'undefined') {
        if (!standalone) {
            throw new Error('Modules must be defined and have length');
        }
    }
    if (!hasDependencies) {
        throw new Error('topLevelPackage.dependencies must be defined');
    }
    if (!hasDevDependencies) {
        throw new Error('topLevelPackage.devDependencies must be defined');
    }
    if (!hasOptionalDependencies) {
        throw new Error('topLevelPackage.optionalDependencies must be defined');
    }
    if (!modules)
        return;
    for (const module of modules) {
        if (typeof module.identifier === 'undefined') {
            throw new Error('module.identifier must be defined');
        }
        if (typeof module.reasons === 'undefined') {
            throw new Error('module.reasons must be defined');
        }
        if ((['consume-shared-module', 'provide-module', 'remote-module'].includes(module.moduleType ?? '') ||
            module.name?.includes('container entry')) &&
            typeof module.issuerName === 'undefined') {
            throw new Error('module.issuerName must be defined');
        }
    }
}
exports.validateParams = validateParams;
//# sourceMappingURL=validate-params.js.map