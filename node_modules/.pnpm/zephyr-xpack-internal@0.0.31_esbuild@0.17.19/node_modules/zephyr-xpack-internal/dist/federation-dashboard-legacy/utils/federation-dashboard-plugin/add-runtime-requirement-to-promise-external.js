"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.AddRuntimeRequirementToPromiseExternal = void 0;
class AddRuntimeRequirementToPromiseExternal {
    apply(compiler) {
        compiler.hooks.compilation.tap('AddRuntimeRequirementToPromiseExternal', (compilation) => {
            const { RuntimeGlobals } = compiler.webpack;
            if (compilation.outputOptions.trustedTypes) {
                compilation.hooks.additionalModuleRuntimeRequirements.tap('AddRuntimeRequirementToPromiseExternal', (module, set) => {
                    if (module.externalType === 'promise') {
                        set.add(RuntimeGlobals.loadScript);
                    }
                });
            }
        });
    }
}
exports.AddRuntimeRequirementToPromiseExternal = AddRuntimeRequirementToPromiseExternal;
//# sourceMappingURL=add-runtime-requirement-to-promise-external.js.map